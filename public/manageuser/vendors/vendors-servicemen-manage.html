<div class="row mt">
  <div class="col-md-12">
    <div class="content-panel">
      <div loading style="text-align: center;"><img src="../assets/img/Preloader_1.gif"/> </div>
      <table id="all_servicemen" class="table table-striped table-advance table-hover">

        <button id="add_srvcmn" class="btn btn-success btn-lg" data-toggle="modal" data-target="#addordermodal">Add Servicemen</button>&nbsp;
        <button id="addvendor" class="btn btn-success btn-lg" data-toggle="modal" data-target="#add_vendor">Add Vendor</button>
        <hr>
        <thead>
          <tr>

            <th class="hidden-phone"><i class="fa fa-cogs"></i>Email</th>
            <th><i class="fa fa-map-marker"></i>Name</th>
            <th>Photo</th>
            <th><i class="fa fa-map-marker"></i>Number</th>
            <th><i class=" fa fa-edit"></i>Service</th>
            <th><i class="fa fa-map-marker"></i>Type</th>
            <th><i class=" fa fa-edit"></i>Actions</th>

          </tr>
        </thead>
        <tbody>

        </tbody>
      </table>
    </div><!-- /content-panel -->
    <!-- Modal -->
    <div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="myModal" class="modal fade">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">Forgot Password ?</h4>
          </div>
          <div class="modal-body">
            <p>Enter your e-mail address below to reset your password.</p>
            <input type="text" name="email" placeholder="Email" autocomplete="off" class="form-control placeholder-no-fix">

          </div>
          <div class="modal-footer">
            <button data-dismiss="modal" class="btn btn-default" type="button">Cancel</button>
            <button class="btn btn-theme" type="button">Submit</button>
          </div>
        </div>
      </div>
    </div>
    <!-- edit serviceman modal-->
    <div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="edit_addordermodal" class="modal fade" style="display: none;">
      <div class="modal-dialog">
        <input type="hidden"  id="serviceman_edit" name="">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h4 class="modal-title">Edit Serviceman</h4>
          </div>
          <div class="modal-body">
            <p>Fill Customer information below.</p>
            <form action="#" class="form-horizontal style-form" method="post">
              <div class="form-group">
                <label class="col-sm-2 col-sm-2 control-label">First Name</label>
                <div class="col-sm-10">
                  <input type="text" name="first_name" class="form-control" placeholder="Eg.Piyush">
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 col-sm-2 control-label">Last Name</label>
                <div class="col-sm-10">
                  <input type="text" name="last_name" class="form-control" placeholder="Eg.Piyush">
                </div>
              </div>
              <input type="hidden" name="id" class="form-control" placeholder="Eg. abc@abc.com">
              <div class="form-group">
                <label class="col-sm-2 col-sm-2 control-label">Email</label>
                <div class="col-sm-10">
                  <input type="text" name="email" class="form-control" placeholder="Eg. abc@abc.com">
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 col-sm-2 control-label">Mobile Number</label>
                <div class="col-sm-10">
                  <input type="text" name="number" class="form-control" placeholder="Eg. 9876543210">
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 col-sm-2 control-label">Gender</label>
                <div class="col-sm-10">
                  <select name="gender" class="form-control" placeholder="eg.A-1101">
                    <option>Select</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="other">Other</option>
                  </select>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 col-sm-2 control-label">Date Of Birth</label>
                <div class="col-sm-10">
                  <div id="e_dob"></div>
                </div>
              </div>

              <div class="form-group">
                <label class="col-sm-2 col-sm-2 control-label">Created Date and time</label>
                <div class="col-sm-10">
                  <input type="text" name="created_date_time" data-date-format="yyyy-mm-dd" class="form-control" placeholder="Select date of birth">
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 col-sm-2 control-label">Created By</label>
                <div class="col-sm-10">
                  <input type="text" name="created_by" data-date-format="yyyy-mm-dd" class="form-control" placeholder="Select date of birth">
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 col-sm-2 control-label">Password</label>
                <div class="col-sm-10">
                  <input type="text" name="password" data-date-format="yyyy-mm-dd" class="form-control" placeholder="Select date of birth">
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 col-sm-2 control-label">Address</label>
                <div class="col-sm-10">
                  <input type="text" name="address" data-date-format="yyyy-mm-dd" class="form-control" placeholder="Select date of birth">
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 col-sm-2 control-label">Services</label>
                <div class="col-sm-10">
                  <input type="text" name="services" data-date-format="yyyy-mm-dd" class="form-control" placeholder="Select date of birth">
                </div>
              </div>
        </form>
      </div>
      <div class="modal-footer">
        <button data-dismiss="modal" class="btn btn-default" type="button">Cancel</button>
        <button class="btn btn-theme" id="edit_service_partner" type="submit">Submit</button>
      </div>
    </div>
  </div>
</div>


<div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="add_vendor" class="modal fade" style="display: none;">
  <div class="modal-dialog">
    <input type="hidden"  id="" name="">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h4 class="modal-title">Add Vendor</h4>
      </div>
      <div class="modal-body">
        <p>Fill All information below.</p>


        <form action="#" class="form-horizontal style-form" method="post">
          <div class="form-group">
            <label class="col-sm-2 col-sm-2 control-label">First Name</label>
            <div class="col-sm-10">
              <input type="text" name="vfirst_name" class="form-control" placeholder="Eg.Piyush">
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 col-sm-2 control-label">Last Name</label>
            <div class="col-sm-10">
              <input type="text" name="vlast_name" class="form-control" placeholder="Eg.Piyush">
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 col-sm-2 control-label">Oragnisation Name</label>
            <div class="col-sm-10">
              <input type="text" name="vorganisation_name" class="form-control" placeholder="">
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 col-sm-2 control-label">Serviceman (Press Ctrl and select)</label>
            <div class="col-sm-10">
              <select id="vendor_servicemen" class="form-control" multiple >
                <option value="">Select Vendor</option>
              </select>
            </div>
          </div>

      <input type="hidden" name="id" class="form-control" placeholder="Eg. abc@abc.com">
      <div class="form-group">
        <label class="col-sm-2 col-sm-2 control-label">Email</label>
        <div class="col-sm-10">
          <input type="text" name="vemail" class="form-control" placeholder="Eg. abc@abc.com">
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-2 col-sm-2 control-label">Password</label>
        <div class="col-sm-10">
          <input type="text" name="v_pass" class="form-control" placeholder="Eg. abc@abc.com">
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-2 col-sm-2 control-label">Mobile Number</label>
        <div class="col-sm-10">
          <input type="text" name="vnumber" class="form-control" placeholder="Eg. 9876543210">
        </div>
      </div>

      <div class="form-group">
        <label class="col-sm-2 col-sm-2 control-label">Photo</label>
        <div class="col-sm-5">
          <input type="hidden" name="vphoto" class="form-control" placeholder="eg. mata rani ka mandir etc.">
          <button type="button" id="vupload_img" class="form-control" placeholder="eg. mata rani ka mandir etc.">Upload</button>
        </div>
        <div class="col-sm-5">
          <img src=""  id="v_pre_photo" width="80" height="80">
        </div>
      </div>

      <div class="form-group">
        <label class="col-sm-2 col-sm-2 control-label">Gender</label>
        <div class="col-sm-10">
          <select name="vgender" class="form-control" placeholder="eg.A-1101">
            <option></option>
            <option value="male">Male</option>
            <option value="female">Female</option>
            <option value="other">Other</option>
          </select>
        </div>
      </div>

      <div class="form-group">
        <label class="col-sm-2 col-sm-2 control-label">Date Of Birth</label>
        <div class="col-sm-10">
          <div id="vdob"></div>
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-2 col-sm-2 control-label">Building /House No</label>
        <div class="col-sm-10">
          <input type="text" name="houseno" class="form-control" placeholder="Sec-10,hounse no-22">
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-2 col-sm-2 control-label">Locality/Society Name</label>
        <div class="col-sm-10">
          <input type="text" name="society"  class="form-control" placeholder="eg. xyz nagar/ co-operative society">
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-2 col-sm-2 control-label">City</label>
        <div class="col-sm-10">
          <select name="location"  class="form-control" placeholder="eg.A-1101" />

          </select>
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-2 col-sm-2 control-label">State</label>
        <div class="col-sm-10">
          <input type="text" name="state" value="" class="form-control" />
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-2 col-sm-2 control-label">Zip Code</label>
        <div class="col-sm-10">
          <input type="text" name="zip_code" class="form-control" />
        </div>
      </div>



    </form>

  </div>
  <div class="modal-footer">
    <button data-dismiss="modal" class="btn btn-default" type="button">Cancel</button>
    <button class="btn btn-theme" id="save_vendor" type="submit">Submit</button>
  </div>
</div>
</div>
</div>










<!-- edit servicemanmodalend -->
<!-- modal -->
<div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="addordermodal" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Add Serviceman</h4>
      </div>
      <div class="modal-body">
        <p>Fill Customer information below.</p>


        <form action="#"  class="form-horizontal style-form" method="post">

          <div class="form-group">
            <label class="col-sm-2 col-sm-2 control-label">First Name</label>
            <div class="col-sm-10">
              <input type="text" name="first_name" class="form-control" placeholder="Eg.Piyush">
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 col-sm-2 control-label">Last Name</label>
            <div class="col-sm-10">
              <input type="text" name="last_name" class="form-control" placeholder="Eg.Piyush">
            </div>
          </div>

      <div class="form-group">
        <label class="col-sm-2 col-sm-2 control-label">Gender</label>
        <div class="col-sm-10">
          <select name="gender"  class="form-control" placeholder="eg.A-1101">
            <option>Select</option>
            <option value="male">Male</option>
            <option value="female">Female</oprion>
              <option value="other">Other</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-2 col-sm-2 control-label">Roles</label>
          <div class="col-sm-10">
            <input type="text" name="roles" id="serviceman_roles" class="form-control" >

          </div>
        </div>

        <div class="form-group">
          <label class="col-sm-2 col-sm-2 control-label">Date Of Birth</label>
          <div class="col-sm-10">
            <div id="s_dob"></div>
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-2 col-sm-2 control-label">Email</label>
          <div class="col-sm-10">
            <input type="text" name="_email"  class="form-control" placeholder="Eg. abc@abc.com">
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-2 col-sm-2 control-label">Password</label>
          <div class="col-sm-10">
            <input type="text" name="_pass"  class="form-control" placeholder="Eg. abc@abc.com">
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-2 col-sm-2 control-label">Mobile Number</label>
          <div class="col-sm-10">
            <input type="text" name="number" class="form-control" placeholder="Eg. 9876543210">
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-2 col-sm-2 control-label">Photo</label>
          <div class="col-sm-5">
            <input type="hidden" name="photo" class="form-control" placeholder="eg. mata rani ka mandir etc.">
            <button type="button" id="upload_img" class="form-control" placeholder="eg. mata rani ka mandir etc.">Upload</button>
          </div>
          <div class="col-sm-5">
            <img id="pro_image" width="80" height="80">
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-2 col-sm-2 control-label">Building /House No</label>
          <div class="col-sm-10">
            <input type="text" name="houseno" class="form-control" placeholder="Sec-10,hounse no-22">
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-2 col-sm-2 control-label">Locality/Society Name</label>
          <div class="col-sm-10">
            <input type="text" name="society"  class="form-control" placeholder="eg. xyz nagar/ co-operative society">
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-2 col-sm-2 control-label">City</label>
          <div class="col-sm-10">
            <select name="location"  class="form-control" placeholder="eg.A-1101" />

            </select>
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-2 col-sm-2 control-label">State</label>
          <div class="col-sm-10">
            <input type="text" name="state" value="" class="form-control" />
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-2 col-sm-2 control-label">Zip Code</label>
          <div class="col-sm-10">
            <input type="text" name="zip_code" class="form-control" />
          </div>
        </div>

    <h3>Select Services</h3>
    <div class="steps pn " id="serviceman_serices"></div>
  </form>

</div>
<div class="modal-footer">
  <button data-dismiss="modal" class="btn btn-default" type="button">Cancel</button>
  <button class="btn btn-theme" id="add_serviceman" type="submit">Submit</button>
</div>
</div>
</div>
</div>

</div><!-- /col-md-12 -->
</div><!-- /row -->


<script>
$("#vdob,#e_dob,#s_dob").birthdayPicker({
  "maxYear": "2000",
  "maxAge": 90,
  "monthFormat":"short"
});

jQuery(document).ready(function(){
  jQuery('#add_srvcmn').click(function(){
    jQuery('#pro_image').attr('src','');
    jQuery('#addordermodal [name=photo]').val('')
  });

  var myDropzone2 = new Dropzone("button#vupload_img", { url: "https://handy-service-server.herokuapp.com/image"});

  myDropzone2.on("complete", function(file) {
    myDropzone2.removeFile(file);
  });
  myDropzone2.on("success", function(file, response) {
    //console.log(file);
    jQuery('[name=vphoto]').val(response.url);
    jQuery('#v_pre_photo').attr('src',response.url);
  });



  var myDropzone1 = new Dropzone("#addordermodal button#upload_img", { url: "https://handy-service-server.herokuapp.com/image"});

  myDropzone1.on("complete", function(file) {
    myDropzone1.removeFile(file);
  });
  myDropzone1.on("success", function(file, response) {
    //console.log(file);
    jQuery('[name=photo]').val(response.url);
    jQuery('#pro_image').attr('src',response.url);
  });



  jQuery('#addordermodal').on('click','.role_save',function(event){
    event.preventDefault();
    if(jQuery('#'+jQuery(this).data('role_id')+' input').val()!=''){
      jQuery('#'+jQuery(this).data('role_id')).modal('hide');
      jQuery('body').addClass('modal-open');
    }else{
      swal('Error','Please fill all fields','error');
    }
  });
  jQuery('#addordermodal').on('change','.service_role',function(event){
    console.log($(this).position())
    if ($(this).is(':checked')) {
      $('#'+jQuery(this).val()).modal('show');
    }

  });


jQuery('#addordermodal #serviceman_serices').empty();
  $('#addordermodal select[name="location"]').on('change',function(){
    $.getJSON('https://handy-service-server.herokuapp.com/services/city',{'city':$(this).val()} ,function(data, textStatus) {
        /*optional stuff to do after success */
        console.log(data);
        var service = '';

        if(Object.keys(data).length>0){
          jQuery.each(data,function(key,val){
            service +="<input id='op"+key+"'  class='op1' name='op1' type='checkbox' value='"+val._id+"'/>";
            service +="<label for='op"+key+"' class='col-sm-2 col-sm-2 control-label'>"+val.name+"</label>";
          });
          //console.log(service);
          jQuery('#addordermodal #serviceman_serices').html(service);
        }
    });
  });



  jQuery('#save_vendor').click(function(event){
    event.preventDefault();
    var service=[];
    // jQuery('#addordermodal .op1:checked').each(function(){
    //   service.push(jQuery(this).val());
    //   console.log(service);
    // });
    var modal_name = $('#add_vendor');
    var fullname = modal_name.find('input[name="vfirst_name"]').val()+' '+$('input[name="vlast_name"]').val();
    var email = modal_name.find('input[name="vemail"]').val();
    var pass = modal_name.find('input[name="v_pass"]').val();
    var number = modal_name.find('input[name="vnumber"]').val();
    var photo = modal_name.find('input[name="vphoto"]').val();
    var gender = modal_name.find('select[name="vgender"]').val();
    var dob = modal_name.find('input[name="vdob"]').val();
    var location = modal_name.find('input[name="location"]').val()
    var address = modal_name.find('input[name="houseno"]').val()+' '+modal_name.find('input[name="society"]').val()+' '+location+' '+modal_name.find('input[name="state"]').val()+' '+modal_name.find('input[name="zip_code"]');
    var organisation = modal_name.find('input[name="vorganisation_name"]').val();
    var created_by = " ";
    //zip_code:jQuery('#addordermodal [name=zip_code]').val(),
    if(name !='' && fullname!='' && email !='' &&  pass !='' && number !='' &&  photo !='' &&  gender !='' && dob !='' ){
      $.post('https://handy-service-server.herokuapp.com/add/vendor',{organisation:organisation,name:name, email:email, number:number, location:location, gender:gender, photo:photo, dob:dob, address:address, created_by:created_by}, function(data, textStatus, xhr) {
        /*optional stuff to do after success */
        alert("Success");
            if(data.message=='vendor created'){
              swal('Success','Vendor Created','success');
              setTimeout(function(){window.location.reload();},2000);
            }
      });

    }else{
      swal('Error','All field required','error');
    }
  });

});



</script>
<script>
jQuery(document).ready(function(){

  $.getJSON('https://handy-service-server.herokuapp.com/serviceman/all', function(json, textStatus) {
      /*optional stuff to do after success */
      $.each(json,function(index, el) {
        $('#vendor_servicemen').append('<option value="'+el._id+'">'+el.name+'</option>');
      });

  });



  var servicename = [];
  jQuery.ajax({
    url:'https://handy-service-server.herokuapp.com/services',
    type:'get',
    beforeSend:function(){jQuery('#preloader').show()},
    success:function(data){
      console.log(data);
      if(Object.keys(data).length>0){
        jQuery.each(data,function(key,val){
          servicename[val._id] = val.name;
        });
        //console.log(servicename);
      }
      jQuery.ajax({
        url:'https://handy-service-server.herokuapp.com/serviceman/all',

        success:function(data){
          jQuery.ajax({
            url:'https://handy-service-server.herokuapp.com/all/vendor',
            success:function(data){
              console.log(data);
              $.each(data,function(index, el) {
                $('#all_servicemen tbody').append('<tr><td>'+el.email+'</td><td>'+el.name+'</td><td><img src="'+el.photo+'" class="img-circle" width="40" height="40"></td><td>'+el.number+'</td><td>'+el.services+'</td><td>'+el.user_type+'</td><td class="ng-hide">'+el.dob+'</td><td class="ng-hide">'+el.address+'</td><td><button data-id="'+el._id+'" data-toggle="modal" data-target="#edit_addordermodal" class="btn btn-primary btn-xs edit_serviceman"><i class="fa fa-eye"></i></button> <button data-id="'+el._id+'" class="btn btn-danger btn-xs del_vendor"><i class="fa fa-trash-o "></i></button></td></tr>');
              });
            }
          });
          var servicemen_list = '';

          if(Object.keys(data).length>0){

            console.log(data);

            jQuery.each(data,function(key,val){
              service_name = '';
              service = val.services;
              jQuery.each(val.services,function(key1,val1){
                if(typeof servicename[val1]!=='undefined'){
                  service_name += servicename[val1]+',';
                }else{
                  service_name += 'Not Available ,';
                }
              });
              service = service.join();
              //console.log(val._id);
              email = (typeof val.email!=="undefined")?val.email:"Not Available";
              name = (typeof val.name!=="undefined")?val.name:"Not Available";
              number = (typeof val.number!=="undefined")?val.number:"Not Available";
              user_type = (typeof val.user_type!=="undefined")?val.user_type:"Not Available";
              //srr = "//cdn4.iconfinder.com/data/icons/small-n-flat/24/user-group-512.png";
              photos = (typeof val.photo!=="undefined")?val.photo:"//cdn4.iconfinder.com/data/icons/small-n-flat/24/user-group-512.png";
              servicemen_list +='<tr><td>'+email+'</td>';
              servicemen_list +='<td>'+name+'</td>';
              servicemen_list +='<td><img src="'+photos+'" class="img-circle" width="40" height="40"></td>';
              servicemen_list +='<td>'+number+'</td>';
              servicemen_list +='<td>'+service_name+'</td>';
              servicemen_list +='<td>'+user_type+'</td>';
              servicemen_list +='<td class="ng-hide">'+val.dob+'</td>';
              servicemen_list +='<td class="ng-hide">'+val.address+'</td>';
              servicemen_list +='<td><button data-id="'+val._id+'" data-toggle="modal" data-target="#edit_addordermodal" class="btn btn-primary btn-xs edit_serviceman"><i class="fa fa-eye"></i></button> <button data-id="'+val._id+'" class="btn btn-danger btn-xs del_serviceman"><i class="fa fa-trash-o "></i></button></td></tr>';
            });

          }
          //console.log(servicemen_list)
          jQuery('#preloader').hide();
          jQuery('#all_servicemen tbody').html(servicemen_list);
        }
      });
    }
  });

  $('body').on('click','.del_serviceman',function(){
    var r = confirm("Are you sure you want to delete ?");

    if(r == true){
      $.post('https://handy-service-server.herokuapp.com/delete/serviceman', {id:$(this).attr('data-id')}, function(data, textStatus, xhr) {
        /*optional stuff to do after success */
        window.location.reload();
      });
    }
  });

  $('body').on('click','.del_vendor',function(){
    var r = confirm("Are you sure you want to delete ?");

    if(r == true){
      $.post('https://handy-service-server.herokuapp.com/delete/vendor', {id:$(this).attr('data-id')}, function(data, textStatus, xhr) {
        /*optional stuff to do after success */
        window.location.reload();
      });
    }
  });

  jQuery.ajax({
    url:'https://handy-service-server.herokuapp.com/locations',
    success:function(data){
      var city = '<option></option>';
      if(Object.keys(data).length>0){
        jQuery.each(data,function(key,val){
          if(val.enabled){
            city +='<option data-state="'+val.state_name+'" data-city-id="'+val._id+'" value="'+val.city_name+'">'+val.city_name+'</option>';
          }
        });
        jQuery('select[name=location]').html(city);
        // $('[name=location]').selectpicker();
      }
    }
  });




  jQuery('#addordermodal #add_serviceman').click(function(event){
    event.preventDefault();
    var service=[];
    var modal_name = $('#addordermodal');
    var name = modal_name.find('input[name="first_name"]').val() + ' ' + modal_name.find('input[name="last_name"]').val();
    var gender = modal_name.find('select[name="gender"]').val();
    var dob = modal_name.find('input[name="dob"]').val();
    var email = modal_name.find('input[name="_email"]').val();
    var pass = modal_name.find('input[name="_pass"]').val();
    var number = modal_name.find('input[name="number"]').val();
    var photo = modal_name.find('input[name="photo"]').val();
    var city = modal_name.find('select[name="location"]').val();
    var address = modal_name.find('input[name="houseno"]').val()+' '+modal_name.find('input[name="society"]').val()+' '+city+' '+modal_name.find('input[name="state"]').val()+' '+modal_name.find('input[name="zip_code"]');
    var created_by = localStorage.getItem("adminName");

    jQuery('#addordermodal .op1:checked').each(function(){
      service.push(jQuery(this).val());

    });
    console.log(service);



    if(address != '' && name !='' && gender !='' && dob !='' &&  email !='' &&  pass !='' &&  number !='' && photo !='' &&  city !=''){
      alert("rs");
      $.post('https://handy-service-server.herokuapp.com/add/serviceman',{name:name, email:email, number:number, location:city, gender:gender, photo:photo, dob:dob, created_by:created_by, address:address, pass:pass}, function(data, textStatus, xhr) {
        /*optional stuff to do after success */
        if(data.message=='Serviceman created'){
          swal('Success','Serviceman Created','success');
          window.location.reload();
        }
        if(data.message=='ServiceMan exist'){
          alert("Servieman Exist");
          window.location.reload();
        }
      });
    }else{
      swal('Error','All field required','error');
    }
  });

$('#edit_service_partner').click(function(){
    var edit_modal = $('#edit_addordermodal');
    var id = edit_modal.find('#serviceman_edit').val();
    var name = edit_modal.find('input[name="first_name"]').val()+' '+edit_modal.find('input[name="last_name"]').val();
    var email = edit_modal.find('input[name="email"]').val();
    var number = edit_modal.find('input[name="number"]').val();
    var code = edit_modal.find().val();
    var status = edit_modal.find().val();
    var gender = edit_modal.find('input[name="gender"]').val();
    var dob = edit_modal.find('input[name="dob"]').val();
    var address = edit_modal.find().val();
    var pass = edit_modal.find().val();
    update_vendor_servicemen(id,name,email,number,code,status,gender,dob,address,pass);
});


function update_vendor_servicemen(id,name,email,number,code,status,gender,dob,address,pass){
  $.post('https://handy-service-server.herokuapp.com/update/serviceman',{id:id,name:name,email:email,number:number,code:code,status:status,gender:gender,dob:dob,address:address,pass:pass}, function(data, textStatus, xhr) {
    /*optional stuff to do after success */
    window.location.reload();
  });
}


jQuery('#all_servicemen').on('click','.del_serviceman',function(){
  service_id = jQuery(this).data('id');
  swal({
    title: "Are you sure? ",
    text: "Serviceman Will Be Deleted For Ever",
    type: "warning",
    showCancelButton: true,
    confirmButtonColor: "#DD6B55",
    confirmButtonText: "Yes, delete it!",
    cancelButtonText: "No, cancel plx!",
    closeOnConfirm: false,
    closeOnCancel: false
  },
  function(isConfirm){
    if (isConfirm) {
      jQuery.ajax({
        url:'https://handy-service-server.herokuapp.com/delete/serviceman',
        data:'id='+service_id,
        type:'POST',
        success:function(data){
          if(data.message=='Serviceman deleted.'){
            swal("Deleted!", "Serviceman Has Been Deleted", "success");
            setTimeout(function(){
              window.location.href='';
            },1000);
          }
        }
      })
    } else {
      swal("Cancelled", "Serviceman Has Not Been Deleted :)", "error");
    }
  });

});

$('select[name="location"]').on('click','option',function(event) {
  /* Act on the event */
  var state = $(this).attr('data-state');
  $(this).parents('.modal-body').find('input[name="state"]').val(state);
 //  $(this).parents('.modal-body').find('input.edit-state').val(state);

});


jQuery('#all_servicemen').on('click','.edit_serviceman',function(){
  id = jQuery(this).data('id');
  $('#serviceman_edit').val(id);
  var email = $(this).parents('tr').find('td').eq(0).text();
  var name = $(this).parents('tr').find('td').eq(1).text();
  var number = $(this).parents('tr').find('td').eq(3).text();
  var service = $(this).parents('tr').find('td').eq(4).text();
  var type = $(this).parents('tr').find('td').eq(5).text();
  var gender = '';
  var dob = $(this).parents('tr').find('td').eq(6).text();
  var created_date_time = '';
  var created_by = '';
  var password = '';
  var address = $(this).parents('tr').find('td').eq(7).text();

  $('#edit_addordermodal').find('input[name="first_name"]').val(name.split(" ")[0]);
  $('#edit_addordermodal').find('input[name="last_name"]').val(name.split(" ")[0]);

  $('#edit_addordermodal').find('input[name="email"]').val(email);
  $('#edit_addordermodal').find('input[name="number"]').val(number);
  $('#edit_addordermodal').find('input[name="gender"]').val(gender);
  $('#edit_addordermodal').find('input[name="dob"]').val(dob);
  $('#edit_addordermodal').find('input[name="created_date_time"]').val(created_date_time);
  $('#edit_addordermodal').find('input[name="created_by"]').val(created_by);

  $('#edit_addordermodal').find('input[name="password"]').val(password);
  $('#edit_addordermodal').find('input[name="address"]').val(address);
  $('#edit_addordermodal').find('input[name="services"]').val(service);


});


});

//Load cities

</script>
